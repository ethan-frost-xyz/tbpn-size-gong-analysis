# Quick Start: YouTube Gong Detection with Positive Sample Collection

## **New Feature: Automatic Positive Sample Collection**

You can now automatically collect gong samples from YouTube videos for human-in-the-loop review!

## **New Feature: Bulk Processing**

You can now process multiple YouTube URLs at once using the bulk processing script!

## **How to Use:**

### **Basic Detection:**
```bash
python -m gong_detector.core.detect_from_youtube "https://youtube.com/watch?v=VIDEO_ID"
```

### **With Positive Sample Collection:**
```bash
python -m gong_detector.core.detect_from_youtube "https://youtube.com/watch?v=VIDEO_ID" --save_positive_samples
```

### **With Custom Threshold:**
```bash
python -m gong_detector.core.detect_from_youtube "https://youtube.com/watch?v=VIDEO_ID" --threshold 0.5 --save_positive_samples
```

### **Bulk Processing Multiple URLs:**
```bash
# Process all URLs in core/tbpn_youtube_links.txt
python -m gong_detector.core.bulk_process

# With custom threshold
python -m gong_detector.core.bulk_process --threshold 0.5

# Save positive samples for training
python -m gong_detector.core.bulk_process --save_positive_samples

# Keep temporary audio files
python -m gong_detector.core.bulk_process --keep_audio
```

## **What Happens:**

### **Single Video Processing:**
1. **Downloads YouTube audio** (using yt-dlp)
2. **Detects gongs** (using YAMNet)
3. **Extracts 3-second segments** around each detection
4. **Saves to training folder** for human review

### **Bulk Processing:**
1. **Reads URLs** from `core/tbpn_youtube_links.txt`
2. **Processes each URL** using the same detection pipeline
3. **Creates no files by default** (only detects and reports)
4. **Provides progress updates** and error handling
5. **Continues processing** even if some URLs fail

## **Output Files:**

- **Positive samples**: `gong_detector/training/data/raw_samples/positive/` (only with `--save_positive_samples`)
- **Sample filenames**: `gong_1.5s_conf_0.850_1.wav`
- **No CSV files generated by default** (detection results shown in terminal only)

## **Human-in-the-Loop Workflow:**

### **Single Video:**
1. Run detection with `--save_positive_samples`
2. Review saved samples in `positive/` folder
3. Keep good samples, delete false positives
4. Repeat until you have 50 confirmed samples
5. Then run training pipeline

### **Bulk Processing:**
1. Run bulk processing: `python -m gong_detector.core.bulk_process --save_positive_samples`
2. Review all saved samples across multiple dated folders
3. Keep good samples, delete false positives
4. Much faster collection of training data
5. Then run training pipeline

# Quick Start: Spectrogram Comparison

## **Script is Ready!**

The `compare_spectrograms.py` script has been created and tested successfully.

## **How to Use:**

### 1. **With Test Audio (Ready Now):**

```bash
# Compare the generated test files
python compare_spectrograms.py samples/tbpn_gong.wav samples/reference_gong.wav
```

### 2. **With Your Real Audio Files:**

```bash
# Replace with your actual TBPN gong and reference files
python compare_spectrograms.py path/to/your_tbpn_gong.wav path/to/reference_gong.wav
```

## **What You Get:**

1. **Side-by-side Mel spectrograms** (dB scale)
2. **Audio statistics** (duration, peak amplitude)
3. **Saved plot** in `test_results/spectrogram_comparison.png`

## **What to Look For:**

- **Frequency concentration**: Low vs high frequency energy
- **Time duration**: Short burst vs long decay
- **Harmonic structure**: Complex vs simple frequency patterns
- **Reverb tail**: Length of sound decay

## **Files Created:**

- `compare_spectrograms.py` - Main comparison script
- `create_test_audio.py` - Generate test audio files
- `samples/` - Test audio files
- `test_results/` - Output plots and results

## **Example Output:**

The script will show:

```text
Loading TBPN gong: samples/tbpn_gong.wav
Loading reference gong: samples/reference_gong.wav
Generating spectrogram comparison...

Spectrogram comparison saved to: test_results/spectrogram_comparison.png

=== Audio Statistics ===
TBPN Gong: 2.500s, Peak: 0.800
Reference Gong: 2.000s, Peak: 0.700
```

## **Next Steps:**

1. Run the script with your real TBPN gong audio
2. Compare with a reference gong from YAMNet/AudioSet
3. Analyze the visual differences in frequency patterns
4. Use insights to improve gong detection accuracy

---